#include "stm32f7xx_hal.h"
#include "arm_math.h"

/*
float32_t bins_to_closest_frequencies[256] = {146.83   ,  146.83   ,  146.83   ,  146.83   ,  146.83   ,
        146.83   ,  146.83   ,  146.83   ,  146.83   ,  146.83   ,
        146.83   ,  146.83   ,  146.83   ,  146.83   ,  146.83   ,
        146.83   ,  146.83   ,  146.83   ,  146.83   ,  146.83   ,
        155.56097,  164.81111,  174.6113 ,  174.6113 ,  184.99423,
        195.99457,  207.64902,  207.64902,  219.99648,  233.07814,
        233.07814,  246.93768,  246.93768,  261.62137,  261.62137,
        277.1782 ,  277.1782 ,  293.66006,  293.66006,  311.122  ,
        311.122  ,  311.122  ,  329.62228,  329.62228,  349.22266,
        349.22266,  349.22266,  369.98853,  369.98853,  391.9892 ,
        391.9892 ,  391.9892 ,  415.2981 ,  415.2981 ,  415.2981 ,
        439.993  ,  439.993  ,  439.993  ,  466.15637,  466.15637,
        466.15637,  466.15637,  493.87546,  493.87546,  493.87546,
        493.87546,  523.2428 ,  523.2428 ,  523.2428 ,  554.35645,
        554.35645,  554.35645,  554.35645,  554.35645,  587.3202 ,
        587.3202 ,  587.3202 ,  587.3202 ,  622.2441 ,  622.2441 ,
        622.2441 ,  622.2441 ,  622.2441 ,  659.2446 ,  659.2446 ,
        659.2446 ,  659.2446 ,  698.4454 ,  698.4454 ,  698.4454 ,
        698.4454 ,  698.4454 ,  698.4454 ,  739.9771 ,  739.9771 ,
        739.9771 ,  739.9771 ,  739.9771 ,  783.97845,  783.97845,
        783.97845,  783.97845,  783.97845,  783.97845,  830.59625,
        830.59625,  830.59625,  830.59625,  830.59625,  830.59625,
        879.9861 ,  879.9861 ,  879.9861 ,  879.9861 ,  879.9861 ,
        879.9861 ,  932.3128 ,  932.3128 ,  932.3128 ,  932.3128 ,
        932.3128 ,  932.3128 ,  932.3128 ,  987.75104,  987.75104,
        987.75104,  987.75104,  987.75104,  987.75104,  987.75104,
        987.75104, 1046.4857 , 1046.4857 , 1046.4857 , 1046.4857 ,
       1046.4857 , 1046.4857 , 1046.4857 , 1108.713  , 1108.713  ,
       1108.713  , 1108.713  , 1108.713  , 1108.713  , 1108.713  ,
       1108.713  , 1108.713  , 1174.6405 , 1174.6405 , 1174.6405 ,
       1174.6405 , 1174.6405 , 1174.6405 , 1174.6405 , 1174.6405 ,
       1244.4883 , 1244.4883 , 1244.4883 , 1244.4883 , 1244.4883 ,
       1244.4883 , 1244.4883 , 1244.4883 , 1244.4883 , 1244.4883 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 , 1318.4894 ,
       1318.4894};

*/			 
// now, we can just use argmax on absolute vals of FFT
// then use the argmax value to find appropriate note 			 
			 
uint8_t MIDI_NOTES_FROM_FREQUQNCIES[256] = {50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50,
       50, 50, 50, 51, 52, 53, 53, 54, 55, 56, 56, 57, 58, 58, 59, 59, 60,
       60, 61, 61, 62, 62, 63, 63, 63, 64, 64, 65, 65, 65, 66, 66, 67, 67,
       67, 68, 68, 68, 69, 69, 69, 70, 70, 70, 70, 71, 71, 71, 71, 72, 72,
       72, 73, 73, 73, 73, 73, 74, 74, 74, 74, 75, 75, 75, 75, 75, 76, 76,
       76, 76, 77, 77, 77, 77, 77, 77, 78, 78, 78, 78, 78, 79, 79, 79, 79,
       79, 79, 80, 80, 80, 80, 80, 80, 81, 81, 81, 81, 81, 81, 82, 82, 82,
       82, 82, 82, 82, 83, 83, 83, 83, 83, 83, 83, 83, 84, 84, 84, 84, 84,
       84, 84, 85, 85, 85, 85, 85, 85, 85, 85, 85, 86, 86, 86, 86, 86, 86,
       86, 86, 87, 87, 87, 87, 87, 87, 87, 87, 87, 87, 88, 88, 88, 88, 88,
       88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88,
       88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88,
       88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88,
       88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88,
       88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88, 88,
       88};
						 